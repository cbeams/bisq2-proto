environment:
  properties:
    artifactsDir: app

project:
  # Fix this value for the time being
  version: 2.0.0-early-access
  snapshot:
    label: 'v2.0.0-early-access'
    pattern: '.*-early-access'
  name: bisq
  description: bisq
  longDescription: bisq
  website: https://bisq.network/
  authors:
    - Chris Beams
  license: AGPLv3
  java:
    groupId: network.bisq
    version: 16
    multiProject: true
  extraProperties:
    inceptionYear: 2021

release:
  github:
    overwrite: true
    sign: true
    changelog:
      formatted: ALWAYS
      format: '- {{commitShortHash}} {{commitTitle}}'
      contributors:
        format: '- {{contributorName}}{{#contributorUsernameAsLink}} ({{.}}){{/contributorUsernameAsLink}}'
      labelers:
        - label: 'merge_pull'
          title: 'Merge pull'
        - label: 'merge_branch'
          title: 'Merge branch'
        - label: 'feature'
          title: 'Resolves #'
          body: 'Resolves #'
        - label: 'issue'
          title: 'Fixes #'
          body: 'Fixes #'
        - label: 'docs'
          title: 'docs:'
        - label: 'task'
          title: '[chore]'
        - label: 'task'
          title: '[build]'
        - label: 'dependencies'
          title: '[deps]'
      categories:
        - title: 'Merge'
          labels:
            - 'merge_pull'
            - 'merge_branch'
        - title: 'üöÄ Features'
          labels:
            - 'feature'
        - title: '‚úÖ Issues'
          labels:
            - 'issue'
        - title: 'üß∞ Tasks'
          labels:
            - 'task'
        - title: 'üìù Documentation'
          labels:
            - 'docs'
        - title: '‚öôÔ∏è  Dependencies'
          labels:
            - 'dependencies'
      hide:
        categories:
          - 'Merge'
        contributors:
          - 'GitHub'
      replacers:
        - search: 'task: '
        - search: 'docs: '
        - search: '\[build\] '
        - search: '\[deps\] '
        - search: 'build:'
          replace: '[build]'
        - search: 'cli:'
          replace: '[cli]'
        - search: 'api:'
          replace: '[api]'
        - search: 'fx:'
          replace: '[fx]'

signing:
  active: always
  armored: true

distributions:
  bisqd-jlink:
    type: JLINK
    executable: bisqd
    artifacts:
      - path: '{{artifactsDir}}/daemon/build/distributions/bisqd-osx-x86_64.zip'
        transform: 'bisqd/bisqd-{{projectVersion}}-osx-x86_64.zip'
        platform: 'osx-x86_64'
      - path: '{{artifactsDir}}/daemon/build/distributions/bisqd-windows-x86_64.zip'
        transform: 'bisqd/bisqd-{{projectVersion}}-windows-x86_64.zip'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/daemon/build/distributions/bisqd-linux-x86_64.zip'
        transform: 'bisqd/bisqd-{{projectVersion}}-linux-x86_64.zip'
        platform: 'linux-x86_64'

  bisqd-package:
    type: NATIVE_PACKAGE
    executable: bisqd
    brew:
      active: always
      cask:
        enabled: true
        name: bisqd
    artifacts:
      #- path: '{{artifactsDir}}/daemon/build/jpackage/bisqd-{{projectVersionNumber}}.dmg'
      #  transform: 'bisqd/bisqd-{{projectVersion}}.dmg'
      #  platform: 'osx-x86_64'
      - path: '{{artifactsDir}}/daemon/build/jpackage/bisqd-{{projectVersionNumber}}.pkg'
        transform: 'bisqd/bisqd-{{projectVersion}}.pkg'
        platform: 'osx-x86_64'
      - path: '{{artifactsDir}}/daemon/build/jpackage/bisqd-{{projectVersionNumber}}.msi'
        transform: 'bisqd/bisqd-{{projectVersion}}.msi'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/daemon/build/jpackage/bisqd-{{projectVersionNumber}}.exe'
        transform: 'bisqd/bisqd-{{projectVersion}}.exe'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/daemon/build/jpackage/bisqd-{{projectVersionNumber}}-1.x86_64.rpm'
        transform: 'bisqd/bisqd-{{projectVersion}}-1.x86_64.rpm'
        platform: 'linux-x86_64'
      - path: '{{artifactsDir}}/daemon/build/jpackage/bisqd_{{projectVersionNumber}}-1_amd64.deb'
        transform: 'bisqd/bisqd_{{projectVersion}}-1_amd64.deb'
        platform: 'linux-x86_64'

  bisq-jlink:
    type: JLINK
    executable: bisq
    artifacts:
      - path: '{{artifactsDir}}/cli/build/distributions/bisq-osx-x86_64.zip'
        transform: 'bisq/bisq-{{projectVersion}}-osx-x86_64.zip'
        platform: 'osx-x86_64'
      - path: '{{artifactsDir}}/cli/build/distributions/bisq-windows-x86_64.zip'
        transform: 'bisq/bisq-{{projectVersion}}-windows-x86_64.zip'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/cli/build/distributions/bisq-linux-x86_64.zip'
        transform: 'bisq/bisq-{{projectVersion}}-linux-x86_64.zip'
        platform: 'linux-x86_64'

  bisq-package:
    type: NATIVE_PACKAGE
    executable: bisq
    brew:
      active: always
      cask:
        enabled: true
        name: bisq
    artifacts:
      #- path: '{{artifactsDir}}/cli/build/jpackage/bisq-{{projectVersionNumber}}.dmg'
      #  transform: 'bisq/bisq-{{projectVersion}}.dmg'
      #  platform: 'osx-x86_64'
      - path: '{{artifactsDir}}/cli/build/jpackage/bisq-{{projectVersionNumber}}.pkg'
        transform: 'bisq/bisq-{{projectVersion}}.pkg'
        platform: 'osx-x86_64'
      - path: '{{artifactsDir}}/cli/build/jpackage/bisq-{{projectVersionNumber}}.msi'
        transform: 'bisq/bisq-{{projectVersion}}.msi'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/cli/build/jpackage/bisq-{{projectVersionNumber}}.exe'
        transform: 'bisq/bisq-{{projectVersion}}.exe'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/cli/build/jpackage/bisq-{{projectVersionNumber}}-1.x86_64.rpm'
        transform: 'bisq/bisq-{{projectVersion}}-1.x86_64.rpm'
        platform: 'linux-x86_64'
      - path: '{{artifactsDir}}/cli/build/jpackage/bisq_{{projectVersionNumber}}-1_amd64.deb'
        transform: 'bisq/bisq_{{projectVersion}}-1_amd64.deb'
        platform: 'linux-x86_64'

  bisqfx-jlink:
    type: JLINK
    executable: bisqfx
    artifacts:
      - path: '{{artifactsDir}}/fx/build/distributions/bisqfx-osx-x86_64.zip'
        transform: 'bisqfx/bisqfx-{{projectVersion}}-osx-x86_64.zip'
        platform: 'osx-x86_64'
      - path: '{{artifactsDir}}/fx/build/distributions/bisqfx-windows-x86_64.zip'
        transform: 'bisqfx/bisqfx-{{projectVersion}}-windows-x86_64.zip'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/fx/build/distributions/bisqfx-linux-x86_64.zip'
        transform: 'bisqfx/bisqfx-{{projectVersion}}-linux-x86_64.zip'
        platform: 'linux-x86_64'

  bisqfx-package:
    type: NATIVE_PACKAGE
    executable: bisqfx
    brew:
      active: always
      cask:
        enabled: true
        name: bisqfx
    artifacts:
      - path: '{{artifactsDir}}/fx/build/jpackage/bisqfx-{{projectVersionNumber}}.dmg'
        transform: 'bisqfx/bisqfx-{{projectVersion}}.dmg'
        platform: 'osx-x86_64'
      #- path: '{{artifactsDir}}/fx/build/jpackage/bisqfx-{{projectVersionNumber}}.pkg'
      #  transform: 'bisqfx/bisqfx-{{projectVersion}}.pkg'
      #  platform: 'osx-x86_64'
      - path: '{{artifactsDir}}/fx/build/jpackage/bisqfx-{{projectVersionNumber}}.msi'
        transform: 'bisqfx/bisqfx-{{projectVersion}}.msi'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/fx/build/jpackage/bisqfx-{{projectVersionNumber}}.exe'
        transform: 'bisqfx/bisqfx-{{projectVersion}}.exe'
        platform: 'windows-x86_64'
      - path: '{{artifactsDir}}/fx/build/jpackage/bisqfx-{{projectVersionNumber}}-1.x86_64.rpm'
        transform: 'bisqfx/bisqfx-{{projectVersion}}-1.x86_64.rpm'
        platform: 'linux-x86_64'
      - path: '{{artifactsDir}}/fx/build/jpackage/bisqfx_{{projectVersionNumber}}-1_amd64.deb'
        transform: 'bisqfx/bisqfx_{{projectVersion}}-1_amd64.deb'
        platform: 'linux-x86_64'
